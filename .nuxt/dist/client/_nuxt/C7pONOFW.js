import{r as d,m as g,c as a,o as t,a as i,j as u,t as p,F as _,l as v,d as w}from"./BtseiMPM.js";const k={key:0},D={key:0},U=["onChange"],C={key:0},b={__name:"DocumentUploader",props:{layer:String},setup(n){const m=n,r=d({}),c=d({});g(async()=>{const o=await fetch("/api/docs-config");r.value=await o.json()});async function y(o,s){const e=o.target.files[0],l=new FormData;l.append("file",e);const f=await fetch("/api/upload",{method:"POST",body:l}),{url:h}=await f.json();await fetch("/api/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,fileUrl:h,required:s.required,layer:m.layer,uploadedAt:new Date})}),c.value[s.name]=!0}return(o,s)=>(t(),a("div",null,[i("h2",null,p(n.layer.toUpperCase())+" Document Upload",1),r.value[n.layer]?(t(),a("div",k,[(t(!0),a(_,null,v(r.value[n.layer],e=>(t(),a("div",{key:e.name,style:{"margin-bottom":"1em"}},[i("label",null,[w(p(e.name)+" ",1),e.required?(t(),a("span",D,"*")):u("",!0)]),i("input",{type:"file",onChange:l=>y(l,e)},null,40,U),c.value[e.name]?(t(),a("span",C,"âœ… Uploaded")):u("",!0)]))),128))])):u("",!0)]))}};export{b as _};
