{"version":3,"file":"all-DAk33w9A.js","sources":["../../../../pages/admin/all.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>All Uploaded Documents</h2>\n    <input v-model=\"search\" placeholder=\"Search by name...\" style=\"margin-bottom: 1em; padding: 6px;\" />\n    <select v-model=\"filterLayer\" style=\"margin-left: 10px;\">\n      <option value=\"\">All Layers</option>\n      <option value=\"platform\">Platform</option>\n      <option value=\"organization\">Organization</option>\n      <option value=\"user\">User</option>\n    </select>\n\n    <table border=\"1\" cellspacing=\"0\" cellpadding=\"6\">\n      <thead>\n        <tr>\n          <th>Document Name</th>\n          <th>Layer</th>\n          <th>Required</th>\n          <th>Uploaded At</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"doc in paginatedDocs\" :key=\"doc._id\">\n          <td>{{ doc.name }}</td>\n          <td>{{ doc.layer }}</td>\n          <td>{{ doc.required ? 'Yes' : 'No' }}</td>\n          <td>{{ new Date(doc.uploadedAt).toLocaleString() }}</td>\n          <td>\n            <a :href=\"doc.fileUrl\" target=\"_blank\">üîç View</a> |\n            <a :href=\"doc.fileUrl\" download>‚¨áÔ∏è Download</a> |\n            <button @click=\"deleteDoc(doc._id)\">üóëÔ∏è Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div style=\"margin-top: 1em;\">\n      <button :disabled=\"page === 1\" @click=\"page--\">Prev</button>\n      Page {{ page }}\n      <button :disabled=\"end >= filteredDocs.length\" @click=\"page++\">Next</button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nconst docs = ref([])\nconst page = ref(1)\nconst pageSize = 5\nconst search = ref('')\nconst filterLayer = ref('')\n\nonMounted(async () => {\n  const res = await fetch('/api/docs')\n  docs.value = await res.json()\n})\n\nconst filteredDocs = computed(() =>\n  docs.value.filter(d =>\n    d.name.toLowerCase().includes(search.value.toLowerCase()) &&\n    (!filterLayer.value || d.layer === filterLayer.value)\n  )\n)\n\nconst start = computed(() => (page.value - 1) * pageSize)\nconst end = computed(() => start.value + pageSize)\nconst paginatedDocs = computed(() => filteredDocs.value.slice(start.value, end.value))\n\nasync function deleteDoc(id) {\n  if (confirm(\"Are you sure you want to delete this document?\")) {\n    const res = await fetch(`/api/docs/${id}`, { method: 'DELETE' })\n    const result = await res.json()\n    if (result.success) {\n      docs.value = docs.value.filter(d => d._id !== id)\n    }\n  }\n}\n</script>"],"names":["_ssrRenderList","_ssrInterpolate"],"mappings":";;AAgDA,MAAM,WAAW;;;;;AAFjB,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,OAAO,IAAI,CAAC;AAElB,UAAM,SAAS,IAAI,EAAE;AACrB,UAAM,cAAc,IAAI,EAAE;AAO1B,UAAM,eAAe;AAAA,MAAS,MAC5B,KAAK,MAAM;AAAA,QAAO,OAChB,EAAE,KAAK,YAAA,EAAc,SAAS,OAAO,MAAM,YAAA,CAAa,MACvD,CAAC,YAAY,SAAS,EAAE,UAAU,YAAY;AAAA,MAAA;AAAA,IACjD;AAGF,UAAM,QAAQ,SAAS,OAAO,KAAK,QAAQ,KAAK,QAAQ;AACxD,UAAM,MAAM,SAAS,MAAM,MAAM,QAAQ,QAAQ;AACjD,UAAM,gBAAgB,SAAS,MAAM,aAAa,MAAM,MAAM,MAAM,OAAO,IAAI,KAAK,CAAC;;yGA/DjE,OAAA,KAAM,2DAAkC,EAAA,iBAAA,OAAA,WAAA,MAAA,CAAyC,oCACnE,EAAA,eAAA,OAAA,CAA0B,0DAAvC,YAAA,KAAW,oBAAX,YAAA,OAAW,EAAA,kBAAX,YAAA,OAAW,EAAA,CAAA,IAAA,cAAA,qFAAX,YAAA,KAAW,oBAAX,YAAA,OAAW,UAAA,kBAAX,YAAA,OAAW,UAAA,CAAA,IAAA,cAAA,uFAAX,YAAA,KAAW,oBAAX,YAAA,OAAW,cAAA,kBAAX,YAAA,OAAW,cAAA,CAAA,IAAA,cAAA,mFAAX,YAAA,KAAW,oBAAX,YAAA,OAAW,MAAA,kBAAX,YAAA,OAAW,MAAA,CAAA,IAAA,cAAA;AAkBNA,oBAAA,cAAA,QAAP,QAAG;yBACLC,eAAA,IAAI,IAAI,aACRA,eAAA,IAAI,KAAK,aACTA,eAAA,IAAI,WAAQ,QAAA,IAAA,aACRA,eAAA,IAAA,KAAK,IAAI,UAAU,EAAE,gBAAc,6BAExC,QAAM,IAAI,OAAO,mDACjB,QAAM,IAAI,OAAO;;kEAOxB,EAAA,cAAA,MAAA,CAAwB,mCACR,KAAA,UAAI,CAAA,IAAA,cAAA,wCACf,KAAA,KAAI,kCACO,IAAA,SAAO,aAAA,MAAa,MAAM,IAAA,cAAA;;;;;;;;;;"}