{"version":3,"file":"DocumentUploader-BuG22kPc.js","sources":["../../../../components/DocumentUploader.vue"],"sourcesContent":["\n<template>\n  <div>\n    <h2>{{ layer.toUpperCase() }} Document Upload</h2>\n    <div v-if=\"config[layer]\">\n      <div v-for=\"doc in config[layer]\" :key=\"doc.name\" style=\"margin-bottom: 1em;\">\n        <label>{{ doc.name }} <span v-if=\"doc.required\">*</span></label>\n        <input type=\"file\" @change=\"e => handleFileUpload(e, doc)\" />\n        <span v-if=\"uploaded[doc.name]\">âœ… Uploaded</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nconst props = defineProps({ layer: String })\nconst config = ref({})\nconst uploaded = ref({})\n\nonMounted(async () => {\n  const res = await fetch('/api/docs-config')\n  config.value = await res.json()\n})\n\nasync function handleFileUpload(e, doc) {\n  const file = e.target.files[0]\n  const formData = new FormData()\n  formData.append('file', file)\n\n  const uploadRes = await fetch('/api/upload', { method: 'POST', body: formData })\n  const { url } = await uploadRes.json()\n\n  await fetch('/api/docs', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      name: doc.name,\n      fileUrl: url,\n      required: doc.required,\n      layer: props.layer,\n      uploadedAt: new Date()\n    })\n  })\n\n  uploaded.value[doc.name] = true\n}\n</script>\n"],"names":["_ssrInterpolate"],"mappings":";;;;;;;AAiBA,UAAM,SAAS,IAAI,CAAA,CAAE;AACrB,UAAM,WAAW,IAAI,CAAA,CAAE;;iDAfZA,eAAA,QAAA,MAAM,YAAW,CAAA;AACb,UAAA,OAAA,MAAO,QAAA,KAAK,GAAA;;sBACF,OAAA,MAAO,QAAA,KAAK,GAAA,CAAnB,QAAG;8CAAmC,EAAA,iBAAA,MAAA,CAA2B,aACjEA,eAAA,IAAI,IAAI;AAAgB,cAAA,IAAI,UAAQ;;;;;;cAElC,SAAA,MAAS,IAAI,IAAI,GAAA;;;;;;;;;;;;;;;;;;;;;"}