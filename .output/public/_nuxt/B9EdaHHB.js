import{r,m as k,n as i,c as v,a as e,k as b,p as L,v as _,F as x,l as U,d as p,t as o,o as m}from"./BtseiMPM.js";const A={border:"1",cellspacing:"0",cellpadding:"6"},C=["href"],N=["href"],S=["onClick"],V={style:{"margin-top":"1em"}},E=["disabled"],$=["disabled"],w=5,M={__name:"all",setup(z){const s=r([]),n=r(1),d=r(""),u=r("");k(async()=>{const a=await fetch("/api/docs");s.value=await a.json()});const f=i(()=>s.value.filter(a=>a.name.toLowerCase().includes(d.value.toLowerCase())&&(!u.value||a.layer===u.value))),c=i(()=>(n.value-1)*w),g=i(()=>c.value+w),D=i(()=>f.value.slice(c.value,g.value));async function h(a){confirm("Are you sure you want to delete this document?")&&(await(await fetch(`/api/docs/${a}`,{method:"DELETE"})).json()).success&&(s.value=s.value.filter(y=>y._id!==a))}return(a,t)=>(m(),v("div",null,[t[8]||(t[8]=e("h2",null,"All Uploaded Documents",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),placeholder:"Search by name...",style:{"margin-bottom":"1em",padding:"6px"}},null,512),[[L,d.value]]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),style:{"margin-left":"10px"}},t[4]||(t[4]=[e("option",{value:""},"All Layers",-1),e("option",{value:"platform"},"Platform",-1),e("option",{value:"organization"},"Organization",-1),e("option",{value:"user"},"User",-1)]),512),[[_,u.value]]),e("table",A,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Document Name"),e("th",null,"Layer"),e("th",null,"Required"),e("th",null,"Uploaded At"),e("th",null,"Actions")])],-1)),e("tbody",null,[(m(!0),v(x,null,U(D.value,l=>(m(),v("tr",{key:l._id},[e("td",null,o(l.name),1),e("td",null,o(l.layer),1),e("td",null,o(l.required?"Yes":"No"),1),e("td",null,o(new Date(l.uploadedAt).toLocaleString()),1),e("td",null,[e("a",{href:l.fileUrl,target:"_blank"},"🔍 View",8,C),t[5]||(t[5]=p(" | ")),e("a",{href:l.fileUrl,download:""},"⬇️ Download",8,N),t[6]||(t[6]=p(" | ")),e("button",{onClick:y=>h(l._id)},"🗑️ Delete",8,S)])]))),128))])]),e("div",V,[e("button",{disabled:n.value===1,onClick:t[2]||(t[2]=l=>n.value--)},"Prev",8,E),p(" Page "+o(n.value)+" ",1),e("button",{disabled:g.value>=f.value.length,onClick:t[3]||(t[3]=l=>n.value++)},"Next",8,$)])]))}};export{M as default};
